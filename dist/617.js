"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[617],{7:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(2142),s=t(2454),n=t(5124),i=(t(6540),t(4848));const o=e=>{let{errorMessage:r}=e;return(0,i.jsxs)(a.A,{severity:"error",children:[(0,i.jsx)(s.A,{children:"Error"}),(0,i.jsx)(n.A,{variant:"body1",children:r})]})}},680:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(9792),s=t(4848);const n=(0,a.A)((0,s.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},725:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(7286),s=t(2229);const n=()=>{const e=localStorage.getItem("access_token");return(0,a.I)({queryKey:["currentUserProfile"],queryFn:()=>(async()=>{try{return(await s.A.get("/me")).data}catch(e){throw new Error("Failed to get current user profile")}})(),enabled:!!e,staleTime:3e5,retry:!1})}},2077:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(9792),s=t(4848);const n=(0,a.A)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},2412:(e,r,t)=>{t.d(r,{A:()=>y});var a=t(6540),s=t(4164),n=t(1362),i=t(6739),o=t(3202),l=t(9565),c=t(6148),d=t(1908);function u(e){return(0,d.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var h=t(4848);const p=(0,i.Ay)(l.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),y=a.forwardRef((function(e,r){const t=(0,o.b)({props:e,name:"MuiCard"}),{className:a,raised:i=!1,...l}=t,c={...t,raised:i},d=(e=>{const{classes:r}=e;return(0,n.A)({root:["root"]},u,r)})(c);return(0,h.jsx)(p,{className:(0,s.A)(d.root,a),elevation:i?8:void 0,ref:r,ownerState:c,...l})}))},2617:(e,r,t)=>{t.r(r),t.d(r,{default:()=>d}),t(6540);var a=t(6858),s=t(6739),n=t(9253),i=t(8609),o=t(4848);const l=(0,s.Ay)(a.A)({flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}),c=(0,s.Ay)("div")({flexGrow:1,overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}}),d=()=>(0,o.jsxs)(l,{children:[(0,o.jsx)(a.A,{sx:{flexShrink:0},children:(0,o.jsx)(n.A,{})}),(0,o.jsx)(c,{children:(0,o.jsx)(i.A,{})})]})},3779:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(6475),s=t(8511);const n=e=>{let{limit:r,offset:t}=e;return(0,a.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:t=0}=e;return(0,s.bP)({limit:r,offset:t})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const r=new URL(e.next).searchParams.get("offset");return r?parseInt(r):void 0}}})}},4690:(e,r,t)=>{t.d(r,{k:()=>n});var a=t(9783),s=t(5800);const n=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,r)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[r%62]),""),r=(t=await(async e=>{const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",r)})(e),btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var t;const n=a.U6,i=s._q,o=a.iW,l=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),n&&i){const e={response_type:"code",client_id:n,scope:o,code_challenge_method:"S256",code_challenge:r,redirect_uri:i};l.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=l.toString()}}},6109:(e,r,t)=>{t.d(r,{A:()=>l});var a=t(725),s=t(7665),n=t(7097),i=t(8511);var o=t(4690);const l=()=>{const{data:e}=(0,a.A)(),{mutate:r}=(()=>{const e=(0,s.jE)(),{data:r}=(0,a.A)();return(0,n.n)({mutationFn:e=>r?.id?(0,i.Nt)(r.id,e):Promise.reject(new Error("user is not defined")),onSuccess:()=>{e.invalidateQueries({queryKey:["current-user-playlists"]})}})})();return{handleCreate:()=>{e?r({name:"내 플레이리스트"}):(alert("로그인이 필요합니다."),(0,o.k)())}}}},8511:(e,r,t)=>{t.d(r,{Dg:()=>o,Nt:()=>l,YO:()=>c,bP:()=>n,bt:()=>i});var a=t(2229),s=t(4871);const n=async e=>{let{limit:r,offset:t}=e;try{return(await a.A.get("/me/playlists",{params:{limit:r,offset:t}})).data}catch(e){throw new Error("fail to fetch current user playlist")}},i=async e=>{try{return(await a.A.get(`/playlists/${e.playlist_id}`,{params:e})).data}catch(e){throw new Error("fail to fetch playlist detail")}},o=async e=>{const r=await(0,s.M)(),{playlist_id:t,...n}=e;try{return(await a.A.get(`playlists/${e.playlist_id}/tracks`,{params:n,headers:{Authorization:`Bearer ${r.access_token}`}})).data}catch(e){throw console.error("getPlaylistItems API Error:",e),new Error("fail to fetch playlist items")}},l=async(e,r)=>{try{const{name:t,playlistPublic:s,collaborative:n,description:i}=r;return(await a.A.post(`/users/${e}/playlists`,{name:t,public:s,collaborative:n,description:i})).data}catch(e){throw new Error("fail to create playlist")}},c=async(e,r)=>{try{return(await a.A.post(`/playlists/${e}/tracks`,r)).data}catch(e){throw new Error("fail to add playlist")}}},8609:(e,r,t)=>{t.d(r,{A:()=>w});var a=t(6540),s=t(6739),n=t(2412),i=t(431),o=t(5124),l=t(6109),c=t(4848);const d=(0,s.Ay)(n.A)((e=>{let{theme:r}=e;return{backgroundColor:r.palette.background.paper,padding:"20px",borderRadius:"8px"}})),u=(0,s.Ay)(i.A)({marginTop:"20px",fontWeight:"700"}),h=()=>{const{handleCreate:e}=(0,l.A)();return(0,c.jsxs)(d,{children:[(0,c.jsx)(o.A,{variant:"h2",fontWeight:700,children:"Create your first playlist"}),(0,c.jsx)(o.A,{variant:"body2",children:"It's easy, we'll help you"}),(0,c.jsx)(u,{variant:"contained",color:"secondary",onClick:e,children:"Create playlist"})]})};var p=t(3779),y=t(2587),f=t(7),x=t(5692),g=t(725),m=t(5647),A=t(5800);const v=(0,s.Ay)("div",{shouldForwardProp:e=>"selected"!==e})((e=>{let{theme:r,selected:t}=e;return{display:"flex",alignItems:"center",margin:"20px 0",padding:"8px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s, color 0.3s",color:t?"#1ed760":r.palette.text.primary,"&:hover":{backgroundColor:"rgba(255,255,255,0.08)"}}})),w=()=>{const e=(0,m.Zp)(),[r,t]=(0,a.useState)(null),{ref:s,inView:n}=(0,x.Wx)(),{data:i,isLoading:o,error:l,hasNextPage:d,isFetchingNextPage:u,fetchNextPage:w}=(0,p.A)({limit:A.Wt,offset:0}),{data:j}=(0,g.A)();if((0,a.useEffect)((()=>{n&&d&&!u&&w()}),[n,d,u,w]),!j)return(0,c.jsx)(h,{});if(o)return(0,c.jsx)(y.A,{});if(l)return(0,c.jsx)(f.A,{errorMessage:l.message});const b=i?.pages.flatMap((e=>e.items))||[];return(0,c.jsx)("div",{style:{maxHeight:"100vh",overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:0===b.length?(0,c.jsx)(h,{}):(0,c.jsxs)(c.Fragment,{children:[b.map((a=>{const s=a.images?.[0]?.url||"/music_album.png",n=r===a.id;return(0,c.jsxs)(v,{selected:n,onClick:()=>{return r=a.id,t(r),void e(`/playlist/${r}`);var r},children:[(0,c.jsx)("img",{src:s,alt:a.name,style:{width:40,height:40,objectFit:"cover",background:"gray",marginRight:8,borderRadius:"8px"}}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,c.jsx)("div",{children:a.name}),(0,c.jsxs)("div",{children:["플레이리스트 ",a.owner.display_name]})]})]},a.id)})),(0,c.jsx)("div",{ref:s,style:{height:"1px"}}),u&&(0,c.jsx)(y.A,{})]})})}},9253:(e,r,t)=>{t.d(r,{A:()=>h});var a=t(680),s=t(2077),n=t(6739),i=t(6858),o=t(5124),l=t(431),c=t(6109),d=t(4848);const u=(0,n.Ay)("div")({display:"flex",alignItems:"center",padding:"8px",justifyContent:"space-between"}),h=()=>{const{handleCreate:e}=(0,c.A)();return(0,d.jsxs)(u,{children:[(0,d.jsxs)(i.A,{display:"flex",children:[(0,d.jsx)(a.A,{sx:{marginRight:"20px"}}),(0,d.jsx)(o.A,{variant:"h2",fontWeight:700,children:"My Playlist"})]}),(0,d.jsx)(l.A,{onClick:e,children:(0,d.jsx)(s.A,{color:"primary"})})]})}}}]);
//# sourceMappingURL=617.js.map?ver=717b600d002a67c73f9d
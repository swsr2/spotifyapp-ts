"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[257],{7:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(2142),a=r(2454),n=r(5124),s=(r(6540),r(4848));const i=e=>{let{errorMessage:t}=e;return(0,s.jsxs)(o.A,{severity:"error",children:[(0,s.jsx)(a.A,{children:"Error"}),(0,s.jsx)(n.A,{variant:"body1",children:t})]})}},680:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(9792),a=r(4848);const n=(0,o.A)((0,a.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},725:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(7286),a=r(2229);const n=()=>{const e=localStorage.getItem("access_token");return(0,o.I)({queryKey:["currentUserProfile"],queryFn:()=>(async()=>{try{return(await a.A.get("/me")).data}catch(e){throw new Error("Failed to get current user profile")}})(),enabled:!!e,staleTime:3e5,retry:!1})}},2077:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(9792),a=r(4848);const n=(0,o.A)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},2257:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var o=r(6540),a=r(5647),n=r(6739),s=r(6858),i=r(9792),l=r(4848);const c=(0,i.A)((0,l.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var d=r(2764),p=r(5124),h=r(9253),u=r(8609),x=r(431),y=r(4690);const m=()=>(0,l.jsx)(x.A,{variant:"contained",color:"secondary",size:"large",onClick:()=>{(0,y.k)()},children:"Login"});var g=r(725);const f=()=>{const{data:e}=(0,g.A)(),t=e?.images?.[0]?.url||"/profile.png";return(0,l.jsx)(s.A,{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"64px",children:e?(0,l.jsx)("img",{src:t,alt:"profile",style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):(0,l.jsx)(m,{})})};var v=r(9565),A=r(4164),w=r(1362),b=r(9241),j=r(3202),k=r(6148),C=r(1908);function S(e){return(0,C.Ay)("MuiBottomNavigation",e)}(0,k.A)("MuiBottomNavigation",["root"]);const P=(0,n.Ay)("div",{name:"MuiBottomNavigation",slot:"Root"})((0,b.A)((({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper})))),R=o.forwardRef((function(e,t){const r=(0,j.b)({props:e,name:"MuiBottomNavigation"}),{children:a,className:n,component:s="div",onChange:i,showLabels:c=!1,value:d,...p}=r,h={...r,component:s,showLabels:c},u=(e=>{const{classes:t}=e;return(0,w.A)({root:["root"]},S,t)})(h);return(0,l.jsx)(P,{as:s,className:(0,A.A)(u.root,n),ref:t,ownerState:h,...p,children:o.Children.map(a,((e,t)=>{if(!o.isValidElement(e))return null;const r=void 0===e.props.value?t:e.props.value;return o.cloneElement(e,{selected:r===d,showLabel:void 0!==e.props.showLabel?e.props.showLabel:c,value:r,onChange:i})}))})}));var M=r(3526);function N(e){return(0,C.Ay)("MuiBottomNavigationAction",e)}const L=(0,k.A)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]);var _=r(5078);const E=(0,n.Ay)(M.A,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.showLabel&&!r.selected&&t.iconOnly]}})((0,b.A)((({theme:e})=>({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${L.selected}`]:{color:(e.vars||e).palette.primary.main},variants:[{props:({showLabel:e,selected:t})=>!e&&!t,style:{paddingTop:14}},{props:({showLabel:e,selected:t,label:r})=>!e&&!t&&!r,style:{paddingTop:0}}]})))),B=(0,n.Ay)("span",{name:"MuiBottomNavigationAction",slot:"Label"})((0,b.A)((({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${L.selected}`]:{fontSize:e.typography.pxToRem(14)},variants:[{props:({showLabel:e,selected:t})=>!e&&!t,style:{opacity:0,transitionDelay:"0s"}}]})))),F=o.forwardRef((function(e,t){const r=(0,j.b)({props:e,name:"MuiBottomNavigationAction"}),{className:o,icon:a,label:n,onChange:s,onClick:i,selected:c,showLabel:d,value:p,slots:h={},slotProps:u={},...x}=r,y=r,m=(e=>{const{classes:t,showLabel:r,selected:o}=e,a={root:["root",!r&&!o&&"iconOnly",o&&"selected"],label:["label",!r&&!o&&"iconOnly",o&&"selected"]};return(0,w.A)(a,N,t)})(y),g={slots:h,slotProps:u},[f,v]=(0,_.A)("root",{elementType:E,externalForwardedProps:{...g,...x},shouldForwardComponentProp:!0,ownerState:y,ref:t,className:(0,A.A)(m.root,o),additionalProps:{focusRipple:!0},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),(e=>{s&&s(e,p),i&&i(e)})(t)}})}),[b,k]=(0,_.A)("label",{elementType:B,externalForwardedProps:g,ownerState:y,className:m.label});return(0,l.jsxs)(f,{...v,children:[a,(0,l.jsx)(b,{...k,children:n})]})}));var I=r(680);const W=()=>{const e=(0,a.Zp)(),t=(0,a.zy)();return(0,l.jsx)(v.A,{sx:{position:"fixed",bottom:0,left:0,right:0,display:{xs:"block",sm:"none"}},elevation:3,children:(0,l.jsxs)(R,{showLabels:!0,value:t.pathname,onChange:(t,r)=>e(r),sx:{position:"fixed",bottom:0,left:0,width:"100%",zIndex:1300,backgroundColor:"#121212",borderTop:"1px solid #2a2a2a",boxShadow:"0 -1px 3px rgba(0, 0, 0, 0.2)"},children:[(0,l.jsx)(F,{label:"Home",value:"/",icon:(0,l.jsx)(c,{})}),(0,l.jsx)(F,{label:"Search",value:"/search",icon:(0,l.jsx)(d.A,{})}),(0,l.jsx)(F,{label:"Playlist",icon:(0,l.jsx)(I.A,{}),value:"/playlist"})]})})},z=(0,n.Ay)("div")({display:"flex",height:"100vh",padding:"8px"}),T=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{width:"331px",height:"100vh",display:"flex",flexDirection:"column",marginRight:"8px",overflow:"hidden",[t.breakpoints.down("sm")]:{display:"none"}}})),D=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{color:t.palette.text.primary,backgroundColor:t.palette.background.paper,borderRadius:"8px",width:"100%",padding:"8px",marginBottom:"8px",marginRight:"8px"}})),O=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{color:t.palette.text.primary,backgroundColor:"#121212",borderRadius:"8px",width:"100%",padding:"8px",marginBottom:"8px",marginRight:"8px",height:"100%",display:"flex",flexDirection:"column"}})),q=(0,n.Ay)("ul")({listStyle:"none",padding:"0",margin:"0"}),H=(0,n.Ay)(a.k2)((e=>{let{theme:t}=e;return{textDecoration:"none",display:"flex",alignItems:"center",padding:"10px",gap:"20px",color:t.palette.text.secondary,"&:hover":{color:t.palette.text.primary},"&.active":{color:t.palette.text.primary}}})),U=(0,n.Ay)(D)({flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}),$=(0,n.Ay)("div")({flexGrow:1,overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}}),V=()=>(0,l.jsxs)(z,{children:[(0,l.jsxs)(T,{children:[(0,l.jsx)(D,{children:(0,l.jsxs)(q,{children:[(0,l.jsxs)(H,{to:"/",children:[(0,l.jsx)(c,{}),(0,l.jsx)(p.A,{variant:"h2",fontWeight:700,children:"Home"})]}),(0,l.jsxs)(H,{to:"/search",children:[(0,l.jsx)(d.A,{}),(0,l.jsx)(p.A,{variant:"h2",fontWeight:700,children:"Search"})]})]})}),(0,l.jsxs)(U,{children:[(0,l.jsx)(s.A,{sx:{flexShrink:0},children:(0,l.jsx)(h.A,{})}),(0,l.jsx)($,{children:(0,l.jsx)(u.A,{})})]})]}),(0,l.jsxs)(O,{children:[(0,l.jsx)(f,{}),(0,l.jsx)(s.A,{sx:{flexGrow:1,overflowY:"auto",backgroundColor:"#121212",paddingBottom:"64px",height:"100%",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:(0,l.jsx)(a.sv,{})})]}),(0,l.jsx)(W,{})]})},2412:(e,t,r)=>{r.d(t,{A:()=>x});var o=r(6540),a=r(4164),n=r(1362),s=r(6739),i=r(3202),l=r(9565),c=r(6148),d=r(1908);function p(e){return(0,d.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var h=r(4848);const u=(0,s.Ay)(l.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),x=o.forwardRef((function(e,t){const r=(0,i.b)({props:e,name:"MuiCard"}),{className:o,raised:s=!1,...l}=r,c={...r,raised:s},d=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},p,t)})(c);return(0,h.jsx)(u,{className:(0,a.A)(d.root,o),elevation:s?8:void 0,ref:t,ownerState:c,...l})}))},2764:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(9792),a=r(4848);const n=(0,o.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},3779:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(6475),a=r(8511);const n=e=>{let{limit:t,offset:r}=e;return(0,o.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:r=0}=e;return(0,a.bP)({limit:t,offset:r})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const t=new URL(e.next).searchParams.get("offset");return t?parseInt(t):void 0}}})}},4690:(e,t,r)=>{r.d(t,{k:()=>n});var o=r(9783),a=r(5800);const n=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,t)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t%62]),""),t=(r=await(async e=>{const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const n=o.U6,s=a._q,i=o.iW,l=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),n&&s){const e={response_type:"code",client_id:n,scope:i,code_challenge_method:"S256",code_challenge:t,redirect_uri:s};l.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=l.toString()}}},6109:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(725),a=r(7665),n=r(7097),s=r(8511);var i=r(4690);const l=()=>{const{data:e}=(0,o.A)(),{mutate:t}=(()=>{const e=(0,a.jE)(),{data:t}=(0,o.A)();return(0,n.n)({mutationFn:e=>t?.id?(0,s.Nt)(t.id,e):Promise.reject(new Error("user is not defined")),onSuccess:()=>{e.invalidateQueries({queryKey:["current-user-playlists"]})}})})();return{handleCreate:()=>{e?t({name:"내 플레이리스트"}):(alert("로그인이 필요합니다."),(0,i.k)())}}}},8511:(e,t,r)=>{r.d(t,{Dg:()=>i,Nt:()=>l,YO:()=>c,bP:()=>n,bt:()=>s});var o=r(2229),a=r(4871);const n=async e=>{let{limit:t,offset:r}=e;try{return(await o.A.get("/me/playlists",{params:{limit:t,offset:r}})).data}catch(e){throw new Error("fail to fetch current user playlist")}},s=async e=>{try{return(await o.A.get(`/playlists/${e.playlist_id}`,{params:e})).data}catch(e){throw new Error("fail to fetch playlist detail")}},i=async e=>{const t=await(0,a.M)(),{playlist_id:r,...n}=e;try{return(await o.A.get(`playlists/${e.playlist_id}/tracks`,{params:n,headers:{Authorization:`Bearer ${t.access_token}`}})).data}catch(e){throw console.error("getPlaylistItems API Error:",e),new Error("fail to fetch playlist items")}},l=async(e,t)=>{try{const{name:r,playlistPublic:a,collaborative:n,description:s}=t;return(await o.A.post(`/users/${e}/playlists`,{name:r,public:a,collaborative:n,description:s})).data}catch(e){throw new Error("fail to create playlist")}},c=async(e,t)=>{try{return(await o.A.post(`/playlists/${e}/tracks`,t)).data}catch(e){throw new Error("fail to add playlist")}}},8609:(e,t,r)=>{r.d(t,{A:()=>b});var o=r(6540),a=r(6739),n=r(2412),s=r(431),i=r(5124),l=r(6109),c=r(4848);const d=(0,a.Ay)(n.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.paper,padding:"20px",borderRadius:"8px"}})),p=(0,a.Ay)(s.A)({marginTop:"20px",fontWeight:"700"}),h=()=>{const{handleCreate:e}=(0,l.A)();return(0,c.jsxs)(d,{children:[(0,c.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Create your first playlist"}),(0,c.jsx)(i.A,{variant:"body2",children:"It's easy, we'll help you"}),(0,c.jsx)(p,{variant:"contained",color:"secondary",onClick:e,children:"Create playlist"})]})};var u=r(3779),x=r(2587),y=r(7),m=r(5692),g=r(725),f=r(5647),v=r(5800);const A="/music_album.webp",w=(0,a.Ay)("div",{shouldForwardProp:e=>"selected"!==e})((e=>{let{theme:t,selected:r}=e;return{display:"flex",alignItems:"center",margin:"20px 0",padding:"8px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s, color 0.3s",color:r?"#1ed760":t.palette.text.primary,"&:hover":{backgroundColor:"rgba(255,255,255,0.08)"}}})),b=()=>{const e=(0,f.Zp)(),[t,r]=(0,o.useState)(null),{ref:a,inView:n}=(0,m.Wx)(),{data:s,isLoading:i,error:l,hasNextPage:d,isFetchingNextPage:p,fetchNextPage:b}=(0,u.A)({limit:v.Wt,offset:0}),{data:j}=(0,g.A)();if((0,o.useEffect)((()=>{n&&d&&!p&&b()}),[n,d,p,b]),!j)return(0,c.jsx)(h,{});if(i)return(0,c.jsx)(x.A,{});if(l)return(0,c.jsx)(y.A,{errorMessage:l.message});const k=s?.pages.flatMap((e=>e.items))||[];return(0,c.jsx)("div",{style:{maxHeight:"100vh",overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:0===k.length?(0,c.jsx)(h,{}):(0,c.jsxs)(c.Fragment,{children:[k.map((o=>{const a=o.images?.[0]?.url||A,n=t===o.id;return(0,c.jsxs)(w,{selected:n,onClick:()=>{return t=o.id,r(t),void e(`/playlist/${t}`);var t},children:[(0,c.jsx)("img",{src:a,alt:o.name,onError:e=>{e.currentTarget.src=A},style:{width:40,height:40,objectFit:"cover",background:"gray",marginRight:8,borderRadius:"8px"}}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,c.jsx)("div",{children:o.name}),(0,c.jsxs)("div",{children:["플레이리스트 ",o.owner.display_name]})]})]},o.id)})),(0,c.jsx)("div",{ref:a,style:{height:"1px"}}),p&&(0,c.jsx)(x.A,{})]})})}},9253:(e,t,r)=>{r.d(t,{A:()=>h});var o=r(680),a=r(2077),n=r(6739),s=r(6858),i=r(5124),l=r(431),c=r(6109),d=r(4848);const p=(0,n.Ay)("div")({display:"flex",alignItems:"center",padding:"8px",justifyContent:"space-between"}),h=()=>{const{handleCreate:e}=(0,c.A)();return(0,d.jsxs)(p,{children:[(0,d.jsxs)(s.A,{display:"flex",children:[(0,d.jsx)(o.A,{sx:{marginRight:"20px"}}),(0,d.jsx)(i.A,{variant:"h2",fontWeight:700,children:"My Playlist"})]}),(0,d.jsx)(l.A,{onClick:e,children:(0,d.jsx)(a.A,{color:"primary"})})]})}}}]);
//# sourceMappingURL=257.js.map?ver=e312d7c6a9b65b43b49a